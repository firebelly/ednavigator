{% extends (craft.app.request.isAjax and not craft.app.request.isLivePreview) ? "_ajax-layout" : "_layout" %}

{% set title = "Search Results" %}
{% set bodyClass = 'page page-ideas page-search-results' %}

{% set query = craft.app.request.getParam('q') %}
{% set results = craft.entries().section('ideasEntries').search(query).orderBy('score') %}

{% block content %}

  <section class="intro-section with-headline">
    <div class="grid">
      <h1 class="page-headline">
        {{ results|length }} result{{ results|length > 1 ? "s" : "" }} found for “{{ query }}”
      </h1>

      {% include "ideas/_subscribe" %}
    </div>

    {% include "ideas/_filter" %}

  </section>


  {% if results|length %}
    <div class="article-list">

      {% for article in results.all() %}
        {% include "ideas/_article" %}
      {% endfor %}

    </div>
  {% else %}
    <p>Your search for “{{ query }}” didn’t return any results.</p>
  {% endif %}

{% endblock %}