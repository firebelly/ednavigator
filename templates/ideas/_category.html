{% extends (craft.app.request.isAjax and not craft.app.request.isLivePreview) ? "_ajax-layout" : "_layout" %}

{% set limit = null %}
{% set params = { limit: limit, relatedTo: category } %}

{% set title = "Blog" %}
{% set bodyClass = 'page page-blog page-category' %}

{% block content %}

  <section class="intro-section with-headline">
    <div class="grid">
      <h1 class="page-headline">
        {{ 'category' | t | capitalize }}:<br> {{ category.title }}
      </h1>

      {% include "blog/_subscribe" %}
    </div>

    {% include "blog/_filter" %}

  </section>

  {% set articles = craft.entries(params) %}

  <div class="article-list">

    {% for article in articles.all() %}
      {% include "blog/_article" %}
    {% endfor %}

  </div>

{% endblock %}